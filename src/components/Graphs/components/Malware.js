import React, {Component} from 'react';
import AnyChart from "anychart-react";
import {malwarChartConfigure} from "../../../helpers";
import {getToken} from "../../../containers/Auth/Auth";
import axios from "axios";
import Loader from "../../common/Loader";
import axiosClient from '../../../shared/axiosClient';
const complexSettings = {

};
class Malware extends Component {
    state = {
        chartConfiguration:malwarChartConfigure
    }

    async getMalWareData () {
        return await axios.get(process.env.REACT_APP_API_URL+'malware/graph/', {
            params: {
            },
            headers: {
                Authorization:`Token ${getToken()}`
            }
        });
    };


    componentDidMount() {

        axiosClient.malwares.graph().then(response => {
            let chartData = [];

            response.data.results.map(v => {
                chartData.push({
                    x: v.type, value:v.value
                });
            });
            this.setState({chartConfiguration:{
                data: chartData
            }});
        });
        // let malware_data = this.getMalWareData().then((response) => {
        //     let chartData = [];

        //     response.data.results.map(v => {
        //         chartData.push({
        //             x: v.type, value:v.value
        //         });
        //     });
        //     this.setState({chartConfiguration:{
        //             data: chartData
        //         }})
        // }).catch(error => {
        //     console.log(error.response);
        //     console.log("not ok toke");
        // });

    }

    render() {
        return (
            <div className="malware">
                <h3>Malware</h3>
                <div className="graph-cont" style={{position:'relative'}}>
                    <a onClick={this.props.onClickMalware} ><img style={{width:'40px', marginTop:'208px', cursor:'pointer'}} src="images/donut_chart_map.png" alt="chartsMap" className="dcm_img" /></a>
                </div>
                {/*<Loader />*/}
                <AnyChart
                    {...this.state.chartConfiguration}
                />
                {/*<div className="graph-cont" id="container1"><a data-toggle="modal" data-target="#exampleModalCenter1"><img src="images/donut_chart_map.png" alt="chartsMap" className="dcm_img" /></a></div>*/}
            </div>
        );
    }
}

export default Malware;